<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript</title>

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/_styles/site.css">
    <link rel="stylesheet" href="/_styles/page.css">

    <!-- codemirror -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.4/codemirror.min.js" integrity="sha512-M1DpFDDFHNgGdgVsSkTP1sjfWC7mQFJM3obQo8gyKHbZmbmr95Kl9wPYa5T70BFQBi0+/TlcG6IZDLowJCbKBQ==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.4/codemirror.min.css" integrity="sha512-xIf9AdJauwKIVtrVRZ0i4nHP61Ogx9fSRAkCLecmE2dL/U8ioWpDvFCAy4dcfecN72HHB9+7FfQj3aiO68aaaw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.4/mode/xml/xml.min.js" integrity="sha512-XPih7uxiYsO+igRn/NA2A56REKF3igCp5t0W1yYhddwHsk70rN1bbbMzYkxrvjQ6uk+W3m+qExHIJlFzE6m5eg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.4/mode/javascript/javascript.min.js" integrity="sha512-+tn2IYnLwD2J9p6Nrn/Dl7ag9lluHA0GAblT/vnMiJV8DU/iDsldgf+9XbEqZUee2ThyDtfmSDb+IDZ9u7jrSA==" crossorigin="anonymous"></script>
    <script src="/_scripts/init_codemirror.js" defer></script>

    <script defer src="/_scripts/nav.js"></script>

</head>
<body>
    <div id="__NAV__"></div>

    <header>
        <a id="Back" class="clickable" href="../" target="_self"><img src="/_media/back.svg" alt="back"></a>
        <h1>JavaScript</h1>
    </header>
    <div id="__MAIN__">
        <h1>Table of Contents</h1>
        <ul>
            <li class="clickable"><a href="#Live-Server">
                Running JavaScript
            </a></li>
            <li class="clickable"><a href="#Game-Code-Structure">
                Game Code Structure
            </a></li>
            <li class="clickable"><a href="#Fixed-Point">
                Fixed Point
            </a></li>
        </ul>



        <h1 id="Live-Server">Running JavaScript</h1>
        <ins class="center">I highly recommend using VS Code.</ins>
        <p>
            JavaScript is run by opening an html file in a browser. The best way to open html files is through Live Server. Install it here:
        </p>
        <div class="clickable external-link center"><a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" target="_blank" rel="noopener noreferrer">
            Live Server VS Code
        </a></div>
        <p><em>
            Note: If you are running anything in the <code>docs</code> directory, you must open a new VS Code window from the <code>docs</code> folder for the CSS to load.
        </em></p>
        <p>
            To include a JavaScript file in an html file, you need to add a <code>script:src</code> tag to the <code>head</code> section, and provide the source path/link. Observe this code block:
        </p>
        <textarea class="code" mode="xml" src="/_code/xml/script-src.xml"></textarea>

        <p>
            Note: Append <code>defer</code> to all script elements.
        </p>

        <h2>CDNs</h2>
        <p>
            CDN stands for content delivery network. We use a CDN to retrieve JavaScript files from https links instead of paths. A <a href="https://www.jsdelivr.com/github" target="_blank" rel="noopener noreferrer">JS Deliver</a> CDN link has this structure: <code>https://cdn.jsdelivr.net/gh/<b>&lt;org/user&nbsp;name&gt;</b>/<b>&lt;repository&gt;</b>@main/<b>&lt;path&gt;</b></code>.
        </p>
            <li>
                Anything inside the <code>docs</code> folder that uses things outside the <code>docs</code> folder must use a CDN link.
            </li>
            <li>
                A file in a repository that uses a file from another repository must use a CDN link.
            </li>
            <li>
                Any changes to files that are pointed to by a CDN link will take ~2 hours to show up.
            </li>
        </ul>



        <h1 id="Game-Code-Structure">JavaScript Code Structure</h1>
        <p>
            To start a new game, create a new UCSB IEEE repository labeled &ldquo;arcade-&lt;game name&gt;&rdquo;, and copy over all the template files from <a href="https://github.com/ucsbieee/arcade/tree/main/arcade-game_template" target="_blank" rel="noopener noreferrer">arcade-game_template/</a>.
        </p>
        <h2>HTML</h2>
        <p>
            <a href="https://github.com/ucsbieee/arcade/blob/main/arcade-game_template/high-level/index.html" target="_blank" rel="noopener noreferrer">high-level/index.html</a> must include the scripts <code>firmware.js</code>, <code>font.js</code> <code>machine.js</code>, <code>game.js</code>, and <code>player.js</code> in that order; and it must include <code>div#Game</code> in <code>body</code>. Example code:
        </p>
        <textarea class="code" mode="xml" src="https://raw.githubusercontent.com/ucsbieee/arcade/main/arcade-game_template/high-level/index.html"></textarea>
        <h2>JavaScript</h2>
        <p>
            <a href="https://github.com/ucsbieee/arcade/blob/main/arcade-game_template/high-level/src/game.js" target="_blank" rel="noopener noreferrer">high-level/src/game.js</a> must have the functions <code>reset()</code>, <code>do_logic()</code>, and <code>fill_vram()</code>. Example code:
        </p>
        <textarea class="code" mode="javascript" src="https://raw.githubusercontent.com/ucsbieee/arcade/main/arcade-game_template/high-level/src/game.js"></textarea>
        <ul>
            <li><code>reset()</code>: run once at the beginning of the code</li>
            <li><code>do_logic()</code>: run 60 times a second. Put as much game logic here as you can. However, do not touch the VRAM</li>
            <li><code>fill_vram()</code>: run after <code>do_logic()</code>, once in the vertical blanking area. Here, you can touch the VRAM</li>
        </ul>
        <p>
            For more information, watch this:
        </p>
        <div class="center-within">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/bQgF7crGjTo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>




        <h1 id="Fixed-Point">Floating Point vs. Fixed Point</h1>
        <p>
            The 65C02 does not have any built-in floating-point functionality. Therefore, we will instead use fixed-point numbers for continuous values.
        </p>
        <div class="clickable external-link center"><a href="https://en.wikipedia.org/wiki/Q_(number_format)" target="_blank" rel="noopener noreferrer">
            Fixed Point Numbers
        </a></div>
        <p>
            We have a Q9_6 implementation in <a href="https://github.com/ucsbieee/arcade/blob/main/high-level/src/firmware.js" target="_blank" rel="noopener noreferrer"><code>firmware.js</code></a>. You can see its usage in <a href="https://github.com/ucsbieee/arcade/blob/main/high-level/tests/game-demo.js" target="_blank" rel="noopener noreferrer"><code>game-demo.js</code></a>.
        </p>
        <p>
            <b>Never use floating point numbers! If you need non-integers, use Q9_6.</b>
        </p>


        <!-- <textarea class="code" mode="js" src="/_code/"></textarea> -->

    </div>
</body>
</html>
